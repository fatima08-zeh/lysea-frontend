{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import\"../styles/AddProductPage.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const brands=[\"Karine Joncas\",\"Watier\",\"Reversa\"];// ‚úÖ Liste des marques\nconst AddProductPage=_ref=>{let{onProductAdded}=_ref;const[formData,setFormData]=useState({nom:\"\",prix:\"\",description:\"\",image:null,brand:\"\"// ‚úÖ Utilisation de `brand` pour correspondre √† la base de donn√©es\n});const navigate=useNavigate();const handleChange=e=>{if(e.target.name===\"image\"){setFormData({...formData,image:e.target.files[0]});}else{setFormData({...formData,[e.target.name]:e.target.value});}};const handleSubmit=async e=>{e.preventDefault();const data=new FormData();data.append(\"nom\",formData.nom);data.append(\"prix\",formData.prix);data.append(\"description\",formData.description);data.append(\"brand\",formData.brand);// ‚úÖ Assure-toi que c'est bien \"brand\" et non \"marque\"\ndata.append(\"image\",formData.image);console.log(\"üì§ Donn√©es envoy√©es :\",Object.fromEntries(data));// ‚úÖ Debug\ntry{const response=await axios.post(\"http://localhost:5001/api/products/add\",data,{headers:{\"Content-Type\":\"multipart/form-data\"}});alert(\"‚úÖ Produit ajout√© !\");navigate(\"/admin/products\");}catch(error){console.error(\"‚ùå Erreur :\",error);alert(\"‚ùå Erreur lors de l'ajout !\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"add-product-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"product-form-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-left\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-right\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Ajouter un Produit\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"nom\",placeholder:\"Nom du produit\",value:formData.nom,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"prix\",placeholder:\"Prix\",value:formData.prix,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",placeholder:\"Description du produit\",rows:\"4\",value:formData.description,onChange:handleChange,required:true}),/*#__PURE__*/_jsxs(\"select\",{name:\"brand\",value:formData.brand,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"S\\xE9lectionner une marque\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Karine Joncas\",children:\"Karine Joncas\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Watier\",children:\"Watier\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Reversa\",children:\"Reversa\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"image\",accept:\"image/*\",onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Ajouter\"})]})]})]})});};export default AddProductPage;","map":{"version":3,"names":["React","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","brands","AddProductPage","_ref","onProductAdded","formData","setFormData","nom","prix","description","image","brand","navigate","handleChange","e","target","name","files","value","handleSubmit","preventDefault","data","FormData","append","console","log","Object","fromEntries","response","post","headers","alert","error","className","children","onSubmit","encType","type","placeholder","onChange","required","rows","accept"],"sources":["C:/Users/Admin/Desktop/stage25/frontend/src/pages/AddProductPage.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"../styles/AddProductPage.css\";\r\n\r\nconst brands = [\"Karine Joncas\", \"Watier\", \"Reversa\"]; // ‚úÖ Liste des marques\r\n\r\nconst AddProductPage = ({ onProductAdded }) => {\r\n    const [formData, setFormData] = useState({ \r\n        nom: \"\", \r\n        prix: \"\", \r\n        description: \"\", \r\n        image: null, \r\n        brand: \"\"  // ‚úÖ Utilisation de `brand` pour correspondre √† la base de donn√©es\r\n    });\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const handleChange = (e) => {\r\n        if (e.target.name === \"image\") {\r\n            setFormData({ ...formData, image: e.target.files[0] });\r\n        } else {\r\n            setFormData({ ...formData, [e.target.name]: e.target.value });\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const data = new FormData();\r\n        data.append(\"nom\", formData.nom);\r\n        data.append(\"prix\", formData.prix);\r\n        data.append(\"description\", formData.description);\r\n        data.append(\"brand\", formData.brand); // ‚úÖ Assure-toi que c'est bien \"brand\" et non \"marque\"\r\n        data.append(\"image\", formData.image);\r\n    \r\n        console.log(\"üì§ Donn√©es envoy√©es :\", Object.fromEntries(data)); // ‚úÖ Debug\r\n    \r\n        try {\r\n            const response = await axios.post(\"http://localhost:5001/api/products/add\", data, {\r\n                headers: { \"Content-Type\": \"multipart/form-data\" },\r\n            });\r\n            alert(\"‚úÖ Produit ajout√© !\");\r\n            navigate(\"/admin/products\");\r\n        } catch (error) {\r\n            console.error(\"‚ùå Erreur :\", error);\r\n            alert(\"‚ùå Erreur lors de l'ajout !\");\r\n        }\r\n    };\r\n    \r\n\r\n    return (\r\n        <div className=\"add-product-page\">\r\n            <div className=\"product-form-container\">\r\n                <div className=\"product-left\"></div>\r\n                <div className=\"product-right\">\r\n                    <h2>Ajouter un Produit</h2>\r\n                    <form onSubmit={handleSubmit} encType=\"multipart/form-data\">\r\n                        <input \r\n                            type=\"text\" \r\n                            name=\"nom\" \r\n                            placeholder=\"Nom du produit\" \r\n                            value={formData.nom} \r\n                            onChange={handleChange} \r\n                            required \r\n                        />\r\n                        <input \r\n                            type=\"text\" \r\n                            name=\"prix\" \r\n                            placeholder=\"Prix\" \r\n                            value={formData.prix} \r\n                            onChange={handleChange} \r\n                            required \r\n                        />\r\n                        <textarea \r\n                            name=\"description\" \r\n                            placeholder=\"Description du produit\" \r\n                            rows=\"4\"\r\n                            value={formData.description} \r\n                            onChange={handleChange} \r\n                            required \r\n                        />\r\n                        \r\n                        {/* ‚úÖ S√©lection de la marque */}\r\n                        <select name=\"brand\" value={formData.brand} onChange={handleChange} required>\r\n                                <option value=\"\">S√©lectionner une marque</option>\r\n                                <option value=\"Karine Joncas\">Karine Joncas</option>\r\n                                <option value=\"Watier\">Watier</option>\r\n                                <option value=\"Reversa\">Reversa</option>\r\n                            \r\n                        </select>\r\n\r\n                        <input \r\n                            type=\"file\" \r\n                            name=\"image\" \r\n                            accept=\"image/*\" \r\n                            onChange={handleChange} \r\n                            required \r\n                        />\r\n                        <button type=\"submit\">Ajouter</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AddProductPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}