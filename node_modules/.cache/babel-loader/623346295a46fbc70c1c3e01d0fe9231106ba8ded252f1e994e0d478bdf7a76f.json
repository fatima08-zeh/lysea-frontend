{"ast":null,"code":"import React,{useState,useEffect,useContext,useRef}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{FaUserCircle,FaHeart,FaShoppingCart}from\"react-icons/fa\";import\"../styles/Navbar.css\";import{UserContext}from\"../context/UserContext\";import{FavoritesContext}from\"../context/FavoritesContext\";import{CartContext}from\"../context/CartContext\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Navbar=_ref=>{let{onSearch}=_ref;const{user,logout}=useContext(UserContext);const{favorites,clearFavorites}=useContext(FavoritesContext);const{cart,clearCart}=useContext(CartContext);const navigate=useNavigate();const[menuOpen,setMenuOpen]=useState(false);const[searchTerm,setSearchTerm]=useState(\"\");const menuRef=useRef(null);const handleSearch=e=>{setSearchTerm(e.target.value);onSearch(e.target.value);};const handleLogout=()=>{clearCart();clearFavorites();logout();navigate(\"/login\");};// Gestion du clic en dehors du menu\nuseEffect(()=>{const handleClickOutside=event=>{const target=event.target;// Si le clic est en dehors de l'icône ET du menu déroulant, on ferme\nif(menuRef.current&&!menuRef.current.contains(target)&&!target.closest(\".icon\")){setMenuOpen(false);}};document.addEventListener(\"mousedown\",handleClickOutside);return()=>{document.removeEventListener(\"mousedown\",handleClickOutside);};},[]);return/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"logo\",children:\"Lys\\xE9a\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"nav-links\",children:[/*#__PURE__*/_jsx(Link,{to:\"/BeautyPage\",children:\"BEAUT\\xC9\"}),/*#__PURE__*/_jsx(Link,{to:\"/lifestyle\"}),/*#__PURE__*/_jsx(Link,{to:\"/blog\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"search-bar\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Rechercher...\",value:searchTerm,onChange:handleSearch})}),/*#__PURE__*/_jsxs(\"div\",{className:\"nav-icons\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/favorites\",className:\"fav-link\",children:[/*#__PURE__*/_jsx(FaHeart,{className:\"icon\"}),favorites.length>0&&/*#__PURE__*/_jsx(\"span\",{className:\"fav-badge\",children:favorites.length})]}),/*#__PURE__*/_jsxs(Link,{to:\"/cart\",className:\"cart-link\",children:[/*#__PURE__*/_jsx(FaShoppingCart,{className:\"icon\"}),cart.length>0&&/*#__PURE__*/_jsx(\"span\",{className:\"cart-badge\",children:cart.length})]}),user&&/*#__PURE__*/_jsxs(Link,{to:\"/account\",className:\"welcome-text\",children:[\"Bonjour, \",user.nom]}),user&&user.role===\"admin\"&&/*#__PURE__*/_jsx(Link,{to:\"/admin\",className:\"admin-link\",children:\"Admin\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-menu\",ref:menuRef,onMouseEnter:()=>setMenuOpen(true),onMouseLeave:()=>setMenuOpen(false),children:[/*#__PURE__*/_jsx(FaUserCircle,{className:\"icon\"}),menuOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"dropdown\",children:user?/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"logout-btn\",children:\"D\\xE9connecter\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"dropdown-item\",children:\"Sign In\"}),/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"dropdown-item\",children:\"Register Now\"})]})})]})]})]});};export default Navbar;","map":{"version":3,"names":["React","useState","useEffect","useContext","useRef","Link","useNavigate","FaUserCircle","FaHeart","FaShoppingCart","UserContext","FavoritesContext","CartContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Navbar","_ref","onSearch","user","logout","favorites","clearFavorites","cart","clearCart","navigate","menuOpen","setMenuOpen","searchTerm","setSearchTerm","menuRef","handleSearch","e","target","value","handleLogout","handleClickOutside","event","current","contains","closest","document","addEventListener","removeEventListener","className","children","to","type","placeholder","onChange","length","nom","role","ref","onMouseEnter","onMouseLeave","onClick"],"sources":["C:/Users/Admin/Desktop/stage25/frontend/src/components/Navbar.js"],"sourcesContent":["import React, { useState, useEffect, useContext, useRef } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { FaUserCircle, FaHeart, FaShoppingCart } from \"react-icons/fa\";\r\nimport \"../styles/Navbar.css\";\r\nimport { UserContext } from \"../context/UserContext\";\r\nimport { FavoritesContext } from \"../context/FavoritesContext\";\r\nimport { CartContext } from \"../context/CartContext\";\r\n\r\nconst Navbar = ({ onSearch }) => {\r\n  const { user, logout } = useContext(UserContext);\r\n  const { favorites, clearFavorites } = useContext(FavoritesContext);\r\n  const { cart, clearCart } = useContext(CartContext);\r\n  const navigate = useNavigate();\r\n  const [menuOpen, setMenuOpen] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const menuRef = useRef(null);\r\n\r\n  const handleSearch = (e) => {\r\n    setSearchTerm(e.target.value);\r\n    onSearch(e.target.value);\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    clearCart();\r\n    clearFavorites();\r\n    logout();\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  // Gestion du clic en dehors du menu\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      const target = event.target;\r\n      // Si le clic est en dehors de l'icône ET du menu déroulant, on ferme\r\n      if (\r\n        menuRef.current &&\r\n        !menuRef.current.contains(target) &&\r\n        !target.closest(\".icon\")\r\n      ) {\r\n        setMenuOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, []);\r\n  \r\n\r\n  return (\r\n    <nav className=\"navbar\">\r\n      <Link to=\"/\" className=\"logo\">Lyséa</Link>\r\n      <div className=\"nav-links\">\r\n        <Link to=\"/BeautyPage\">BEAUTÉ</Link>\r\n        <Link to=\"/lifestyle\"></Link>\r\n        <Link to=\"/blog\"></Link>\r\n      </div>\r\n\r\n      <div className=\"search-bar\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Rechercher...\"\r\n          value={searchTerm}\r\n          onChange={handleSearch}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"nav-icons\">\r\n        <Link to=\"/favorites\" className=\"fav-link\">\r\n          <FaHeart className=\"icon\" />\r\n          {favorites.length > 0 && <span className=\"fav-badge\">{favorites.length}</span>}\r\n        </Link>\r\n\r\n        <Link to=\"/cart\" className=\"cart-link\">\r\n          <FaShoppingCart className=\"icon\" />\r\n          {cart.length > 0 && <span className=\"cart-badge\">{cart.length}</span>}\r\n        </Link>\r\n\r\n        {user && (\r\n          <Link to=\"/account\" className=\"welcome-text\">\r\n             Bonjour, {user.nom}\r\n          </Link> )}        \r\n       {user && user.role === \"admin\" && <Link to=\"/admin\" className=\"admin-link\">Admin</Link>}\r\n\r\n        <div className=\"user-menu\" ref={menuRef}\r\n        onMouseEnter={() => setMenuOpen(true)}\r\n        onMouseLeave={() => setMenuOpen(false)}\r\n        >\r\n          <FaUserCircle \r\n            className=\"icon\" \r\n          />\r\n          {menuOpen && (\r\n            <div className=\"dropdown\">\r\n              {user ? (\r\n                <button onClick={handleLogout} className=\"logout-btn\">Déconnecter</button>\r\n              ) : (\r\n                <>\r\n                  <Link to=\"/login\" className=\"dropdown-item\">Sign In</Link>\r\n                  <Link to=\"/register\" className=\"dropdown-item\">Register Now</Link>\r\n                </>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}