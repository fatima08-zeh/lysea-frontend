{"ast":null,"code":"import React,{useState,useEffect,useContext}from\"react\";import axios from\"axios\";import ProductCard from\"../components/ProductCard\";import\"../styles/BeautyPage.css\";import{useNavigate,useLocation}from\"react-router-dom\";import{FavoritesContext}from\"../context/FavoritesContext\";import{CartContext}from\"../context/CartContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BeautyPage=_ref=>{let{searchTerm}=_ref;const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);const navigate=useNavigate();const location=useLocation();const showFilters=true;const[selectedBrand,setSelectedBrand]=useState(\"\");const[maxPrice,setMaxPrice]=useState(\"\");const{favorites,toggleFavorite}=useContext(FavoritesContext);const{addToCart}=useContext(CartContext);useEffect(()=>{axios.get(\"http://localhost:5001/api/products\").then(response=>{setProducts(response.data);setLoading(false);}).catch(error=>{console.error(\"❌ Erreur chargement des produits :\",error.message);setLoading(false);});},[]);const normalizedSearchTerm=searchTerm?searchTerm.toLowerCase():\"\";const filteredProducts=products.filter(product=>product.nom&&product.nom.toLowerCase().includes(normalizedSearchTerm)).filter(product=>{var _product$brand;return selectedBrand?((_product$brand=product.brand)===null||_product$brand===void 0?void 0:_product$brand.toLowerCase().trim())===selectedBrand.toLowerCase().trim():true;}).filter(product=>maxPrice?product.prix<=parseFloat(maxPrice):true);return/*#__PURE__*/_jsxs(\"div\",{className:\"beauty-page\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"page-content\",children:[showFilters&&/*#__PURE__*/_jsxs(\"div\",{className:\"filters-sidebar\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Filtres\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Marque\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedBrand,onChange:e=>setSelectedBrand(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Marques\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Karine Joncas\",children:\"Karine Joncas\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Watier\",children:\"Watier\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Reversa\",children:\"Reversa\"})]}),/*#__PURE__*/_jsx(\"label\",{children:\"Prix maximum\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Ex: 100\",value:maxPrice,onChange:e=>setMaxPrice(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedBrand(\"\");setMaxPrice(\"\");},children:\"R\\xE9initialiser\"})]}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Chargement des produits...\"}):filteredProducts.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"product-grid\",children:filteredProducts.map(product=>/*#__PURE__*/_jsx(ProductCard,{product:product,addToCart:()=>addToCart(product),toggleFavorite:()=>toggleFavorite(product),isLiked:favorites.some(fav=>fav.id===product.id),navigate:()=>navigate(`/product/${product.id}`)},product.id))}):/*#__PURE__*/_jsx(\"p\",{className:\"no-products\",children:\"Aucun produit disponible.\"})]})]});};export default BeautyPage;","map":{"version":3,"names":["React","useState","useEffect","useContext","axios","ProductCard","useNavigate","useLocation","FavoritesContext","CartContext","jsx","_jsx","jsxs","_jsxs","BeautyPage","_ref","searchTerm","products","setProducts","loading","setLoading","navigate","location","showFilters","selectedBrand","setSelectedBrand","maxPrice","setMaxPrice","favorites","toggleFavorite","addToCart","get","then","response","data","catch","error","console","message","normalizedSearchTerm","toLowerCase","filteredProducts","filter","product","nom","includes","_product$brand","brand","trim","prix","parseFloat","className","children","value","onChange","e","target","type","placeholder","onClick","length","map","isLiked","some","fav","id"],"sources":["C:/Users/Admin/Desktop/stage25/frontend/src/pages/BeautyPage.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport axios from \"axios\";\r\nimport ProductCard from \"../components/ProductCard\";\r\nimport \"../styles/BeautyPage.css\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport { FavoritesContext } from \"../context/FavoritesContext\";\r\nimport { CartContext } from \"../context/CartContext\";\r\n\r\nconst BeautyPage = ({ searchTerm }) => {\r\n    const [products, setProducts] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    const showFilters = true;\r\n\r\n    const [selectedBrand, setSelectedBrand] = useState(\"\");\r\n    const [maxPrice, setMaxPrice] = useState(\"\");\r\n\r\n    const { favorites, toggleFavorite } = useContext(FavoritesContext);\r\n    const { addToCart } = useContext(CartContext);\r\n\r\n    useEffect(() => {\r\n        axios\r\n            .get(\"http://localhost:5001/api/products\")\r\n            .then((response) => {\r\n                setProducts(response.data);\r\n                setLoading(false);\r\n            })\r\n            .catch((error) => {\r\n                console.error(\"❌ Erreur chargement des produits :\", error.message);\r\n                setLoading(false);\r\n            });\r\n    }, []);\r\n\r\n    const normalizedSearchTerm = searchTerm ? searchTerm.toLowerCase() : \"\";\r\n\r\n    const filteredProducts = products\r\n        .filter((product) =>\r\n            product.nom && product.nom.toLowerCase().includes(normalizedSearchTerm)\r\n        )\r\n        .filter((product) =>\r\n            selectedBrand ? product.brand?.toLowerCase().trim() === selectedBrand.toLowerCase().trim() : true\r\n        )\r\n        .filter((product) =>\r\n            maxPrice ? product.prix <= parseFloat(maxPrice) : true\r\n        );\r\n\r\n    return (\r\n        <div className=\"beauty-page\">\r\n            <h2 className=\"section-title\"></h2>\r\n\r\n            <div className=\"page-content\">\r\n                {showFilters && (\r\n                    <div className=\"filters-sidebar\">\r\n                        <h3>Filtres</h3>\r\n\r\n                        <label>Marque</label>\r\n                        <select value={selectedBrand} onChange={(e) => setSelectedBrand(e.target.value)}>\r\n                            <option value=\"\">Marques</option>\r\n                            <option value=\"Karine Joncas\">Karine Joncas</option>\r\n                            <option value=\"Watier\">Watier</option>\r\n                            <option value=\"Reversa\">Reversa</option>\r\n                        </select>\r\n\r\n                        <label>Prix maximum</label>\r\n                        <input\r\n                            type=\"number\"\r\n                            placeholder=\"Ex: 100\"\r\n                            value={maxPrice}\r\n                            onChange={(e) => setMaxPrice(e.target.value)}\r\n                        />\r\n\r\n                        <button onClick={() => {\r\n                            setSelectedBrand(\"\");\r\n                            setMaxPrice(\"\");\r\n                        }}>Réinitialiser</button>\r\n                    </div>\r\n                )}\r\n\r\n                {loading ? (\r\n                    <p>Chargement des produits...</p>\r\n                ) : filteredProducts.length > 0 ? (\r\n                    <div className=\"product-grid\">\r\n                        {filteredProducts.map((product) => (\r\n                            <ProductCard\r\n                                key={product.id}\r\n                                product={product}\r\n                                addToCart={() => addToCart(product)}\r\n                                toggleFavorite={() => toggleFavorite(product)}\r\n                                isLiked={favorites.some((fav) => fav.id === product.id)}\r\n                                navigate={() => navigate(`/product/${product.id}`)}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                ) : (\r\n                    <p className=\"no-products\">Aucun produit disponible.</p>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BeautyPage;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,UAAU,KAAQ,OAAO,CAC9D,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,WAAW,KAAM,2BAA2B,CACnD,MAAO,0BAA0B,CACjC,OAASC,WAAW,CAAEC,WAAW,KAAQ,kBAAkB,CAC3D,OAASC,gBAAgB,KAAQ,6BAA6B,CAC9D,OAASC,WAAW,KAAQ,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErD,KAAM,CAAAC,UAAU,CAAGC,IAAA,EAAoB,IAAnB,CAAEC,UAAW,CAAC,CAAAD,IAAA,CAC9B,KAAM,CAACE,QAAQ,CAAEC,WAAW,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACkB,OAAO,CAAEC,UAAU,CAAC,CAAGnB,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAAoB,QAAQ,CAAGf,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAgB,QAAQ,CAAGf,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAgB,WAAW,CAAG,IAAI,CAExB,KAAM,CAACC,aAAa,CAAEC,gBAAgB,CAAC,CAAGxB,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAACyB,QAAQ,CAAEC,WAAW,CAAC,CAAG1B,QAAQ,CAAC,EAAE,CAAC,CAE5C,KAAM,CAAE2B,SAAS,CAAEC,cAAe,CAAC,CAAG1B,UAAU,CAACK,gBAAgB,CAAC,CAClE,KAAM,CAAEsB,SAAU,CAAC,CAAG3B,UAAU,CAACM,WAAW,CAAC,CAE7CP,SAAS,CAAC,IAAM,CACZE,KAAK,CACA2B,GAAG,CAAC,oCAAoC,CAAC,CACzCC,IAAI,CAAEC,QAAQ,EAAK,CAChBf,WAAW,CAACe,QAAQ,CAACC,IAAI,CAAC,CAC1Bd,UAAU,CAAC,KAAK,CAAC,CACrB,CAAC,CAAC,CACDe,KAAK,CAAEC,KAAK,EAAK,CACdC,OAAO,CAACD,KAAK,CAAC,oCAAoC,CAAEA,KAAK,CAACE,OAAO,CAAC,CAClElB,UAAU,CAAC,KAAK,CAAC,CACrB,CAAC,CAAC,CACV,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAmB,oBAAoB,CAAGvB,UAAU,CAAGA,UAAU,CAACwB,WAAW,CAAC,CAAC,CAAG,EAAE,CAEvE,KAAM,CAAAC,gBAAgB,CAAGxB,QAAQ,CAC5ByB,MAAM,CAAEC,OAAO,EACZA,OAAO,CAACC,GAAG,EAAID,OAAO,CAACC,GAAG,CAACJ,WAAW,CAAC,CAAC,CAACK,QAAQ,CAACN,oBAAoB,CAC1E,CAAC,CACAG,MAAM,CAAEC,OAAO,OAAAG,cAAA,OACZ,CAAAtB,aAAa,CAAG,EAAAsB,cAAA,CAAAH,OAAO,CAACI,KAAK,UAAAD,cAAA,iBAAbA,cAAA,CAAeN,WAAW,CAAC,CAAC,CAACQ,IAAI,CAAC,CAAC,IAAKxB,aAAa,CAACgB,WAAW,CAAC,CAAC,CAACQ,IAAI,CAAC,CAAC,CAAG,IAAI,EACrG,CAAC,CACAN,MAAM,CAAEC,OAAO,EACZjB,QAAQ,CAAGiB,OAAO,CAACM,IAAI,EAAIC,UAAU,CAACxB,QAAQ,CAAC,CAAG,IACtD,CAAC,CAEL,mBACIb,KAAA,QAAKsC,SAAS,CAAC,aAAa,CAAAC,QAAA,eACxBzC,IAAA,OAAIwC,SAAS,CAAC,eAAe,CAAK,CAAC,cAEnCtC,KAAA,QAAKsC,SAAS,CAAC,cAAc,CAAAC,QAAA,EACxB7B,WAAW,eACRV,KAAA,QAAKsC,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC5BzC,IAAA,OAAAyC,QAAA,CAAI,SAAO,CAAI,CAAC,cAEhBzC,IAAA,UAAAyC,QAAA,CAAO,QAAM,CAAO,CAAC,cACrBvC,KAAA,WAAQwC,KAAK,CAAE7B,aAAc,CAAC8B,QAAQ,CAAGC,CAAC,EAAK9B,gBAAgB,CAAC8B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAAAD,QAAA,eAC5EzC,IAAA,WAAQ0C,KAAK,CAAC,EAAE,CAAAD,QAAA,CAAC,SAAO,CAAQ,CAAC,cACjCzC,IAAA,WAAQ0C,KAAK,CAAC,eAAe,CAAAD,QAAA,CAAC,eAAa,CAAQ,CAAC,cACpDzC,IAAA,WAAQ0C,KAAK,CAAC,QAAQ,CAAAD,QAAA,CAAC,QAAM,CAAQ,CAAC,cACtCzC,IAAA,WAAQ0C,KAAK,CAAC,SAAS,CAAAD,QAAA,CAAC,SAAO,CAAQ,CAAC,EACpC,CAAC,cAETzC,IAAA,UAAAyC,QAAA,CAAO,cAAY,CAAO,CAAC,cAC3BzC,IAAA,UACI8C,IAAI,CAAC,QAAQ,CACbC,WAAW,CAAC,SAAS,CACrBL,KAAK,CAAE3B,QAAS,CAChB4B,QAAQ,CAAGC,CAAC,EAAK5B,WAAW,CAAC4B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAChD,CAAC,cAEF1C,IAAA,WAAQgD,OAAO,CAAEA,CAAA,GAAM,CACnBlC,gBAAgB,CAAC,EAAE,CAAC,CACpBE,WAAW,CAAC,EAAE,CAAC,CACnB,CAAE,CAAAyB,QAAA,CAAC,kBAAa,CAAQ,CAAC,EACxB,CACR,CAEAjC,OAAO,cACJR,IAAA,MAAAyC,QAAA,CAAG,4BAA0B,CAAG,CAAC,CACjCX,gBAAgB,CAACmB,MAAM,CAAG,CAAC,cAC3BjD,IAAA,QAAKwC,SAAS,CAAC,cAAc,CAAAC,QAAA,CACxBX,gBAAgB,CAACoB,GAAG,CAAElB,OAAO,eAC1BhC,IAAA,CAACN,WAAW,EAERsC,OAAO,CAAEA,OAAQ,CACjBb,SAAS,CAAEA,CAAA,GAAMA,SAAS,CAACa,OAAO,CAAE,CACpCd,cAAc,CAAEA,CAAA,GAAMA,cAAc,CAACc,OAAO,CAAE,CAC9CmB,OAAO,CAAElC,SAAS,CAACmC,IAAI,CAAEC,GAAG,EAAKA,GAAG,CAACC,EAAE,GAAKtB,OAAO,CAACsB,EAAE,CAAE,CACxD5C,QAAQ,CAAEA,CAAA,GAAMA,QAAQ,CAAC,YAAYsB,OAAO,CAACsB,EAAE,EAAE,CAAE,EAL9CtB,OAAO,CAACsB,EAMhB,CACJ,CAAC,CACD,CAAC,cAENtD,IAAA,MAAGwC,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,2BAAyB,CAAG,CAC1D,EACA,CAAC,EACL,CAAC,CAEd,CAAC,CAED,cAAe,CAAAtC,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}