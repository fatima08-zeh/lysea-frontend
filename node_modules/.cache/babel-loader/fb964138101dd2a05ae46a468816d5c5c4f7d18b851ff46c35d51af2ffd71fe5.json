{"ast":null,"code":"import React,{useState,useContext,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import{CartContext}from\"../context/CartContext\";import{UserContext}from\"../context/UserContext\";import{PayPalScriptProvider,PayPalButtons}from\"@paypal/react-paypal-js\";import PayPalButton from\"../components/PayPalButton\";import\"../styles/OrderPage.css\";import{useSearchParams}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const OrderPage=()=>{const{cart,clearCart}=useContext(CartContext);const{user}=useContext(UserContext);const[address,setAddress]=useState(null);const[firstName,setFirstName]=useState(\"\");const[lastName,setLastName]=useState(\"\");const[phone,setPhone]=useState(\"\");const[addressText,setAddressText]=useState(\"\");const[extraInfo,setExtraInfo]=useState(\"\");const[postalCode,setPostalCode]=useState(\"\");const[defaultAddress,setDefaultAddress]=useState(false);const[isAddressSaved,setIsAddressSaved]=useState(false);const[isEditing,setIsEditing]=useState(false);const[showPaymentForm,setShowPaymentForm]=useState(false);const[paymentMethod,setPaymentMethod]=useState(\"\");const navigate=useNavigate();const[params]=useSearchParams();const productId=params.get(\"id\");const[selectedProduct,setSelectedProduct]=useState(null);const totalAmount=cart.reduce((acc,item)=>acc+item.prix*item.quantity,0);useEffect(()=>{if(user&&user.id){axios.get(`http://localhost:5001/api/addresses/${user.id}`).then(response=>{if(response.data){setAddress(response.data);setIsAddressSaved(true);setFirstName(response.data.first_name);setLastName(response.data.last_name);setPhone(response.data.phone);setAddressText(response.data.address);setPostalCode(response.data.postal_code);}}).catch(error=>{if(error.response&&error.response.status===404){console.warn(\"üì≠ Aucun enregistrement d'adresse trouv√© pour cet utilisateur.\");}else{console.error(\"‚ùå Erreur chargement de l'adresse :\",error);}});}},[user]);useEffect(()=>{if(productId){axios.get(`http://localhost:5001/api/products/${productId}`).then(res=>setSelectedProduct(res.data)).catch(err=>console.error(\"‚ùå Produit introuvable :\",err));}},[productId]);const handlePaymentMethod=method=>{setPaymentMethod(method);setShowPaymentForm(true);};const handlePaymentSuccess=()=>{alert(\"Paiement r√©ussi !\");clearCart();navigate(\"/\");};const handlePayPalPayment=async()=>{try{const response=await axios.post(\"http://localhost:5001/api/checkout/create-payment\",{amount:(totalAmount*1.15).toFixed(2)});if(response.data.approvalUrl){window.location.href=response.data.approvalUrl;}else{alert(\"Erreur lors de la cr√©ation du paiement avec PayPal\");}}catch(error){console.error(\"Erreur lors du paiement avec PayPal :\",error);alert(\"Erreur lors du paiement avec PayPal\");}};const handleSaveAddress=async()=>{const payload={first_name:firstName,last_name:lastName,phone,address:addressText,postal_code:postalCode,extra_info:extraInfo,is_default:defaultAddress};try{if(isAddressSaved){// üõ†Ô∏è Adresse d√©j√† existante ‚Üí mise √† jour\nawait axios.put(`http://localhost:5001/api/addresses/${user.id}`,payload);alert(\"‚úÖ Adresse mise √† jour !\");}else{// üÜï Pas encore d'adresse ‚Üí cr√©ation\nawait axios.post(\"http://localhost:5001/api/addresses/save\",{user_id:user.id,...payload});alert(\"‚úÖ Adresse enregistr√©e !\");setIsAddressSaved(true);}setIsEditing(false);}catch(error){console.error(\"‚ùå Erreur lors de la sauvegarde de l'adresse :\",error);alert(\"Erreur lors de la sauvegarde de l'adresse\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"order-page\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Passer \\xE0 la caisse \\uD83C\\uDDE8\\uD83C\\uDDE6\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"order-left\",children:isAddressSaved&&!isEditing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Adresse de livraison enregistr\\xE9e\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Pr\\xE9nom :\"}),\" \",firstName]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Nom de famille :\"}),\" \",lastName]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"T\\xE9l\\xE9phone :\"}),\" \",phone]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Adresse :\"}),\" \",addressText]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Code postal :\"}),\" \",postalCode]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsEditing(true),className:\"edit-btn\",children:\"Modifier l'adresse\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Adresse de livraison\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();handleSaveAddress();},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Pr\\xE9nom*\",value:firstName,onChange:e=>setFirstName(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Nom de famille*\",value:lastName,onChange:e=>setLastName(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",placeholder:\"T\\xE9l\\xE9phone*\",value:phone,onChange:e=>setPhone(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Adresse*\",value:addressText,onChange:e=>setAddressText(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Code postal*\",value:postalCode,onChange:e=>setPostalCode(e.target.value),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"save-btn\",children:\"Enregistrer et continuer\"})]})]})}),isAddressSaved&&/*#__PURE__*/_jsxs(\"div\",{className:\"order-right\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total de la commande\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Sous-total : \",totalAmount.toFixed(2),\" CAD\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Livraison : GRATUIT\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Taxes : \",(totalAmount*0.15).toFixed(2),\" CAD\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total estim\\xE9 : \",(totalAmount*1.15).toFixed(2),\" CAD\"]}),/*#__PURE__*/_jsx(\"h4\",{children:\"Choisissez votre m\\xE9thode de paiement :\"}),/*#__PURE__*/_jsx(PayPalButton,{amount:(totalAmount*1.15).toFixed(2)}),showPaymentForm&&paymentMethod===\"paypal\"&&/*#__PURE__*/_jsx(PayPalScriptProvider,{options:{\"client-id\":\"YOUR_PAYPAL_CLIENT_ID\"},children:/*#__PURE__*/_jsx(PayPalButtons,{createOrder:(data,actions)=>actions.order.create({purchase_units:[{amount:{value:(totalAmount*1.15).toFixed(2),currency_code:\"CAD\"}}]}),onApprove:(data,actions)=>actions.order.capture().then(handlePaymentSuccess)})})]})]})]});};export default OrderPage;","map":{"version":3,"names":["React","useState","useContext","useEffect","useNavigate","axios","CartContext","UserContext","PayPalScriptProvider","PayPalButtons","PayPalButton","useSearchParams","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","OrderPage","cart","clearCart","user","address","setAddress","firstName","setFirstName","lastName","setLastName","phone","setPhone","addressText","setAddressText","extraInfo","setExtraInfo","postalCode","setPostalCode","defaultAddress","setDefaultAddress","isAddressSaved","setIsAddressSaved","isEditing","setIsEditing","showPaymentForm","setShowPaymentForm","paymentMethod","setPaymentMethod","navigate","params","productId","get","selectedProduct","setSelectedProduct","totalAmount","reduce","acc","item","prix","quantity","id","then","response","data","first_name","last_name","postal_code","catch","error","status","console","warn","res","err","handlePaymentMethod","method","handlePaymentSuccess","alert","handlePayPalPayment","post","amount","toFixed","approvalUrl","window","location","href","handleSaveAddress","payload","extra_info","is_default","put","user_id","className","children","onClick","onSubmit","e","preventDefault","type","placeholder","value","onChange","target","required","options","createOrder","actions","order","create","purchase_units","currency_code","onApprove","capture"],"sources":["C:/Users/Admin/Desktop/stage25/frontend/src/pages/OrderPage.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { CartContext } from \"../context/CartContext\";\r\nimport { UserContext } from \"../context/UserContext\";\r\nimport { PayPalScriptProvider, PayPalButtons } from \"@paypal/react-paypal-js\";\r\nimport PayPalButton from \"../components/PayPalButton\";\r\nimport \"../styles/OrderPage.css\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\n\r\nconst OrderPage = () => {\r\n    const { cart, clearCart } = useContext(CartContext);\r\n    const { user } = useContext(UserContext);\r\n    const [address, setAddress] = useState(null);\r\n    const [firstName, setFirstName] = useState(\"\");\r\n    const [lastName, setLastName] = useState(\"\");\r\n    const [phone, setPhone] = useState(\"\");\r\n    const [addressText, setAddressText] = useState(\"\");\r\n    const [extraInfo, setExtraInfo] = useState(\"\");\r\n    const [postalCode, setPostalCode] = useState(\"\");\r\n    const [defaultAddress, setDefaultAddress] = useState(false);\r\n    const [isAddressSaved, setIsAddressSaved] = useState(false);\r\n    const [isEditing, setIsEditing] = useState(false);\r\n    const [showPaymentForm, setShowPaymentForm] = useState(false);\r\n    const [paymentMethod, setPaymentMethod] = useState(\"\");\r\n    const navigate = useNavigate();\r\n    const [params] = useSearchParams();\r\n    const productId = params.get(\"id\");\r\n    const [selectedProduct, setSelectedProduct] = useState(null);\r\n\r\n    const totalAmount = cart.reduce((acc, item) => acc + item.prix * item.quantity, 0);\r\n\r\n    useEffect(() => {\r\n        if (user && user.id) {\r\n            axios.get(`http://localhost:5001/api/addresses/${user.id}`)\r\n                .then((response) => {\r\n                    if (response.data) {\r\n                        setAddress(response.data);\r\n                        setIsAddressSaved(true); \r\n                        setFirstName(response.data.first_name);\r\n                        setLastName(response.data.last_name);\r\n                        setPhone(response.data.phone);\r\n                        setAddressText(response.data.address);\r\n                        setPostalCode(response.data.postal_code);\r\n                    }\r\n                })\r\n                .catch((error) => {\r\n                    if (error.response && error.response.status === 404) {\r\n                        console.warn(\"üì≠ Aucun enregistrement d'adresse trouv√© pour cet utilisateur.\");\r\n                    } else {\r\n                        console.error(\"‚ùå Erreur chargement de l'adresse :\", error);\r\n                    }\r\n                });\r\n        }\r\n    }, [user]);\r\n    \r\n    useEffect(() => {\r\n        if (productId) {\r\n            axios.get(`http://localhost:5001/api/products/${productId}`)\r\n                .then((res) => setSelectedProduct(res.data))\r\n                .catch((err) => console.error(\"‚ùå Produit introuvable :\", err));\r\n        }\r\n    }, [productId]);\r\n\r\n    const handlePaymentMethod = (method) => {\r\n        setPaymentMethod(method);\r\n        setShowPaymentForm(true);\r\n    };\r\n\r\n    const handlePaymentSuccess = () => {\r\n        alert(\"Paiement r√©ussi !\");\r\n        clearCart();\r\n        navigate(\"/\");\r\n    };\r\n\r\n    const handlePayPalPayment = async () => {\r\n        try {\r\n            const response = await axios.post(\"http://localhost:5001/api/checkout/create-payment\", {\r\n                amount: (totalAmount * 1.15).toFixed(2)\r\n            });\r\n    \r\n            if (response.data.approvalUrl) {\r\n                window.location.href = response.data.approvalUrl;\r\n            } else {\r\n                alert(\"Erreur lors de la cr√©ation du paiement avec PayPal\");\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Erreur lors du paiement avec PayPal :\", error);\r\n            alert(\"Erreur lors du paiement avec PayPal\");\r\n        }\r\n    };\r\n    const handleSaveAddress = async () => {\r\n        const payload = {\r\n            first_name: firstName,\r\n            last_name: lastName,\r\n            phone,\r\n            address: addressText,\r\n            postal_code: postalCode,\r\n            extra_info: extraInfo,\r\n            is_default: defaultAddress,\r\n        };\r\n    \r\n        try {\r\n            if (isAddressSaved) {\r\n                // üõ†Ô∏è Adresse d√©j√† existante ‚Üí mise √† jour\r\n                await axios.put(`http://localhost:5001/api/addresses/${user.id}`, payload);\r\n                alert(\"‚úÖ Adresse mise √† jour !\");\r\n            } else {\r\n                // üÜï Pas encore d'adresse ‚Üí cr√©ation\r\n                await axios.post(\"http://localhost:5001/api/addresses/save\", {\r\n                    user_id: user.id,\r\n                    ...payload,\r\n                });\r\n                alert(\"‚úÖ Adresse enregistr√©e !\");\r\n                setIsAddressSaved(true);\r\n            }\r\n    \r\n            setIsEditing(false);\r\n        } catch (error) {\r\n            console.error(\"‚ùå Erreur lors de la sauvegarde de l'adresse :\", error);\r\n            alert(\"Erreur lors de la sauvegarde de l'adresse\");\r\n        }\r\n    };\r\n    \r\n\r\n    return (\r\n        <div className=\"order-page\">\r\n            <h2>Passer √† la caisse üá®üá¶</h2>\r\n            <div className=\"order-container\">\r\n                <div className=\"order-left\">\r\n                    {isAddressSaved && !isEditing ? (\r\n                        <>\r\n                            <h3>Adresse de livraison enregistr√©e</h3>\r\n                            <p><strong>Pr√©nom :</strong> {firstName}</p>\r\n                            <p><strong>Nom de famille :</strong> {lastName}</p>\r\n                            <p><strong>T√©l√©phone :</strong> {phone}</p>\r\n                            <p><strong>Adresse :</strong> {addressText}</p>\r\n                            <p><strong>Code postal :</strong> {postalCode}</p>\r\n                            <button onClick={() => setIsEditing(true)} className=\"edit-btn\">Modifier l'adresse</button>\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            <h3>Adresse de livraison</h3>\r\n                            <form onSubmit={(e) => { e.preventDefault(); handleSaveAddress(); }}>\r\n                            <div className=\"form-row\">\r\n                                    <input type=\"text\" placeholder=\"Pr√©nom*\" value={firstName} onChange={(e) => setFirstName(e.target.value)} required />\r\n                                    <input type=\"text\" placeholder=\"Nom de famille*\" value={lastName} onChange={(e) => setLastName(e.target.value)} required />\r\n                                </div>\r\n                                <input type=\"tel\" placeholder=\"T√©l√©phone*\" value={phone} onChange={(e) => setPhone(e.target.value)} required />\r\n                                <input type=\"text\" placeholder=\"Adresse*\" value={addressText} onChange={(e) => setAddressText(e.target.value)} required />\r\n                                <input type=\"text\" placeholder=\"Code postal*\" value={postalCode} onChange={(e) => setPostalCode(e.target.value)} required />\r\n                                <button type=\"submit\" className=\"save-btn\">Enregistrer et continuer</button>\r\n                            </form>\r\n                        </>\r\n                    )}\r\n                </div>\r\n\r\n                {isAddressSaved && (\r\n                    <div className=\"order-right\">\r\n                        <h3>Total de la commande</h3>\r\n                        <p>Sous-total : {totalAmount.toFixed(2)} CAD</p>\r\n                        <p>Livraison : GRATUIT</p>\r\n                        <p>Taxes : {(totalAmount * 0.15).toFixed(2)} CAD</p>\r\n                        <p>Total estim√© : {(totalAmount * 1.15).toFixed(2)} CAD</p>\r\n                        <h4>Choisissez votre m√©thode de paiement :</h4>\r\n                        <PayPalButton amount={(totalAmount * 1.15).toFixed(2)} />\r\n                        {showPaymentForm && paymentMethod === \"paypal\" && (\r\n                            <PayPalScriptProvider options={{ \"client-id\": \"YOUR_PAYPAL_CLIENT_ID\" }}>\r\n                                <PayPalButtons\r\n                                    createOrder={(data, actions) => actions.order.create({\r\n                                        purchase_units: [{\r\n                                            amount: {\r\n                                                value: (totalAmount * 1.15).toFixed(2),\r\n                                                currency_code: \"CAD\",\r\n                                            }\r\n                                        }]\r\n                                    })}\r\n                                    onApprove={(data, actions) => actions.order.capture().then(handlePaymentSuccess)}\r\n                                />\r\n                            </PayPalScriptProvider>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default OrderPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}