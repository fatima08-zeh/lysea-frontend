{"ast":null,"code":"import React,{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";const PayPalButton=_ref=>{let{amount}=_ref;const[loading,setLoading]=useState(false);const handlePayment=async()=>{setLoading(true);try{const response=await fetch(\"http://localhost:5001/api/checkout/create-payment\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({amount})});if(!response.ok){const text=await response.text();console.error(\"Create-payment failed:\",text);alert(\"Erreur lors de la création du paiement.\");setLoading(false);return;}const data=await response.json();if(data.approvalUrl){window.location.href=data.approvalUrl;// redirection vers PayPal\n}else{alert(\"Lien d’approbation PayPal introuvable.\");}}catch(error){console.error(\"❌ Erreur PayPal :\",error);alert(\"Erreur lors du paiement.\");}setLoading(false);};return/*#__PURE__*/_jsx(\"button\",{onClick:handlePayment,className:\"btn-paypal\",disabled:loading,children:loading?\"Chargement...\":\"Payer avec PayPal\"});};export default PayPalButton;","map":{"version":3,"names":["React","useState","jsx","_jsx","PayPalButton","_ref","amount","loading","setLoading","handlePayment","response","fetch","method","headers","body","JSON","stringify","ok","text","console","error","alert","data","json","approvalUrl","window","location","href","onClick","className","disabled","children"],"sources":["C:/Users/Admin/Desktop/stage25/frontend/src/components/PayPalButton.js"],"sourcesContent":["import React, { useState } from \"react\";\r\n\r\nconst PayPalButton = ({ amount }) => {\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handlePayment = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(\r\n        \"http://localhost:5001/api/checkout/create-payment\",\r\n        {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({ amount }),\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        const text = await response.text();\r\n        console.error(\"Create-payment failed:\", text);\r\n        alert(\"Erreur lors de la création du paiement.\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      const data = await response.json();\r\n      if (data.approvalUrl) {\r\n        window.location.href = data.approvalUrl; // redirection vers PayPal\r\n      } else {\r\n        alert(\"Lien d’approbation PayPal introuvable.\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"❌ Erreur PayPal :\", error);\r\n      alert(\"Erreur lors du paiement.\");\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <button onClick={handlePayment} className=\"btn-paypal\" disabled={loading}>\r\n      {loading ? \"Chargement...\" : \"Payer avec PayPal\"}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default PayPalButton;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAExC,KAAM,CAAAC,YAAY,CAAGC,IAAA,EAAgB,IAAf,CAAEC,MAAO,CAAC,CAAAD,IAAA,CAC9B,KAAM,CAACE,OAAO,CAAEC,UAAU,CAAC,CAAGP,QAAQ,CAAC,KAAK,CAAC,CAE7C,KAAM,CAAAQ,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChCD,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAAE,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAC1B,mDAAmD,CACnD,CACEC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEV,MAAO,CAAC,CACjC,CACF,CAAC,CAED,GAAI,CAACI,QAAQ,CAACO,EAAE,CAAE,CAChB,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAR,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAClCC,OAAO,CAACC,KAAK,CAAC,wBAAwB,CAAEF,IAAI,CAAC,CAC7CG,KAAK,CAAC,yCAAyC,CAAC,CAChDb,UAAU,CAAC,KAAK,CAAC,CACjB,OACF,CAEA,KAAM,CAAAc,IAAI,CAAG,KAAM,CAAAZ,QAAQ,CAACa,IAAI,CAAC,CAAC,CAClC,GAAID,IAAI,CAACE,WAAW,CAAE,CACpBC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAGL,IAAI,CAACE,WAAW,CAAE;AAC3C,CAAC,IAAM,CACLH,KAAK,CAAC,wCAAwC,CAAC,CACjD,CACF,CAAE,MAAOD,KAAK,CAAE,CACdD,OAAO,CAACC,KAAK,CAAC,mBAAmB,CAAEA,KAAK,CAAC,CACzCC,KAAK,CAAC,0BAA0B,CAAC,CACnC,CACAb,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAED,mBACEL,IAAA,WAAQyB,OAAO,CAAEnB,aAAc,CAACoB,SAAS,CAAC,YAAY,CAACC,QAAQ,CAAEvB,OAAQ,CAAAwB,QAAA,CACtExB,OAAO,CAAG,eAAe,CAAG,mBAAmB,CAC1C,CAAC,CAEb,CAAC,CAED,cAAe,CAAAH,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}