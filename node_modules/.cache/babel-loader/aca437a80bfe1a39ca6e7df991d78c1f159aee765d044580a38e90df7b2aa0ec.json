{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{useNavigate,useParams}from\"react-router-dom\";import\"../styles/EditProductPag.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const brands=[\"Karine Joncas\",\"Watier\",\"Reversa\"];const EditProductPage=()=>{const{id}=useParams();const navigate=useNavigate();// √âtat du formulaire\nconst[formData,setFormData]=useState({nom:\"\",prix:\"\",description:\"\",image:null,brand:\"Autre\"});const[previewImage,setPreviewImage]=useState(null);// ‚úÖ Charger les infos du produit existant\nuseEffect(()=>{axios.get(`http://localhost:5001/api/products/${id}`).then(response=>{const product=response.data;setFormData({nom:product.nom,prix:product.prix,description:product.description||\"\",brand:product.brand||\"\",image:null});setPreviewImage(`http://localhost:5001${product.image_url}`);}).catch(error=>console.error(\"‚ùå Erreur chargement du produit :\",error));},[id]);// ‚úÖ G√©rer les changements dans les champs\nconst handleChange=e=>{if(e.target.name===\"image\"){const file=e.target.files[0];setFormData({...formData,image:file});setPreviewImage(URL.createObjectURL(file));}else{setFormData({...formData,[e.target.name]:e.target.value});}};// ‚úÖ Supprimer le produit\nconst deleteProduct=async()=>{if(!window.confirm(\"√ätes-vous s√ªr de vouloir supprimer ce produit ?\")){return;}try{const response=await axios.delete(`http://localhost:5001/api/products/${id}`);if(response.status===200){alert(\"‚úÖ Produit supprim√© !\");navigate(\"/admin/products\");}else{alert(`‚ùå Erreur : ${response.data.message}`);}}catch(error){console.error(\"‚ùå Erreur lors de la suppression :\",error);alert(\"‚ùå Erreur lors de la suppression du produit !\");}};const handleSubmit=async e=>{e.preventDefault();const data=new FormData();data.append(\"nom\",formData.nom);data.append(\"prix\",formData.prix);data.append(\"description\",formData.description);data.append(\"brand\",formData.brand);if(formData.image){data.append(\"image\",formData.image);}try{await axios.put(`http://localhost:5001/api/products/${id}`,data,{headers:{\"Content-Type\":\"multipart/form-data\"}});alert(\"‚úÖ Produit mis √† jour avec succ√®s !\");navigate(\"/admin/products\");}catch(error){console.error(\"‚ùå Erreur mise √† jour du produit :\",error);alert(\"‚ùå Erreur lors de la mise √† jour !\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"edit-product-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"product-form-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-left\",children:previewImage&&/*#__PURE__*/_jsx(\"img\",{src:previewImage,alt:\"Produit actuel\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-right\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Modifier le Produit\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"nom\",value:formData.nom,onChange:handleChange,placeholder:\"Nom du produit\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"prix\",value:formData.prix,onChange:handleChange,placeholder:\"Prix\",required:true}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:formData.description,onChange:handleChange,placeholder:\"Description du produit\",rows:\"4\",required:true}),/*#__PURE__*/_jsxs(\"select\",{name:\"brand\",value:formData.brand,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"S\\xE9lectionner une marque\"}),brands.map(brand=>/*#__PURE__*/_jsx(\"option\",{value:brand,children:brand},brand))]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"image\",accept:\"image/*\",onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Mettre \\xE0 jour\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-btn\",onClick:deleteProduct,children:\"\\uD83D\\uDDD1\\uFE0F Supprimer le produit\"})]})]})});};export default EditProductPage;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","useParams","jsx","_jsx","jsxs","_jsxs","brands","EditProductPage","id","navigate","formData","setFormData","nom","prix","description","image","brand","previewImage","setPreviewImage","get","then","response","product","data","image_url","catch","error","console","handleChange","e","target","name","file","files","URL","createObjectURL","value","deleteProduct","window","confirm","delete","status","alert","message","handleSubmit","preventDefault","FormData","append","put","headers","className","children","src","alt","onSubmit","encType","type","onChange","placeholder","required","rows","map","accept","onClick"],"sources":["C:/Users/Admin/Desktop/stage25/frontend/src/pages/EditProductPage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport \"../styles/EditProductPag.css\";\r\n\r\nconst brands = [\"Karine Joncas\", \"Watier\", \"Reversa\"];\r\n\r\nconst EditProductPage = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  // √âtat du formulaire\r\n  const [formData, setFormData] = useState({\r\n    nom: \"\",\r\n    prix: \"\",\r\n    description: \"\",\r\n    image: null,\r\n    brand: \"Autre\",\r\n  });\r\n\r\n  const [previewImage, setPreviewImage] = useState(null);\r\n\r\n  // ‚úÖ Charger les infos du produit existant\r\n  useEffect(() => {\r\n    axios\r\n      .get(`http://localhost:5001/api/products/${id}`)\r\n      .then((response) => {\r\n        const product = response.data;\r\n        setFormData({\r\n          nom: product.nom,\r\n          prix: product.prix,\r\n          description: product.description || \"\",\r\n          brand: product.brand || \"\",\r\n          image: null,\r\n        });\r\n        setPreviewImage(`http://localhost:5001${product.image_url}`);\r\n      })\r\n      .catch((error) =>\r\n        console.error(\"‚ùå Erreur chargement du produit :\", error)\r\n      );\r\n  }, [id]);\r\n\r\n  // ‚úÖ G√©rer les changements dans les champs\r\n  const handleChange = (e) => {\r\n    if (e.target.name === \"image\") {\r\n      const file = e.target.files[0];\r\n      setFormData({ ...formData, image: file });\r\n      setPreviewImage(URL.createObjectURL(file));\r\n    } else {\r\n      setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    }\r\n  };\r\n\r\n  // ‚úÖ Supprimer le produit\r\n  const deleteProduct = async () => {\r\n    if (!window.confirm(\"√ätes-vous s√ªr de vouloir supprimer ce produit ?\")) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await axios.delete(`http://localhost:5001/api/products/${id}`);\r\n\r\n      if (response.status === 200) {\r\n        alert(\"‚úÖ Produit supprim√© !\");\r\n        navigate(\"/admin/products\");\r\n      } else {\r\n        alert(`‚ùå Erreur : ${response.data.message}`);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"‚ùå Erreur lors de la suppression :\", error);\r\n      alert(\"‚ùå Erreur lors de la suppression du produit !\");\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const data = new FormData();\r\n    data.append(\"nom\", formData.nom);\r\n    data.append(\"prix\", formData.prix);\r\n    data.append(\"description\", formData.description);\r\n    data.append(\"brand\", formData.brand);\r\n    if (formData.image) {\r\n      data.append(\"image\", formData.image);\r\n    }\r\n\r\n    try {\r\n      await axios.put(`http://localhost:5001/api/products/${id}`, data, {\r\n        headers: { \"Content-Type\": \"multipart/form-data\" },\r\n      });\r\n\r\n      alert(\"‚úÖ Produit mis √† jour avec succ√®s !\");\r\n      navigate(\"/admin/products\");\r\n    } catch (error) {\r\n      console.error(\"‚ùå Erreur mise √† jour du produit :\", error);\r\n      alert(\"‚ùå Erreur lors de la mise √† jour !\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"edit-product-page\">\r\n      <div className=\"product-form-container\">\r\n        <div className=\"product-left\">\r\n          {previewImage && <img src={previewImage} alt=\"Produit actuel\" />}\r\n        </div>\r\n        <div className=\"product-right\">\r\n          <h2>Modifier le Produit</h2>\r\n          <form onSubmit={handleSubmit} encType=\"multipart/form-data\">\r\n            <input\r\n              type=\"text\"\r\n              name=\"nom\"\r\n              value={formData.nom}\r\n              onChange={handleChange}\r\n              placeholder=\"Nom du produit\"\r\n              required\r\n            />\r\n            <input\r\n              type=\"text\"\r\n              name=\"prix\"\r\n              value={formData.prix}\r\n              onChange={handleChange}\r\n              placeholder=\"Prix\"\r\n              required\r\n            />\r\n            <textarea\r\n              name=\"description\"\r\n              value={formData.description}\r\n              onChange={handleChange}\r\n              placeholder=\"Description du produit\"\r\n              rows=\"4\"\r\n              required\r\n            />\r\n            {/* ‚úÖ S√©lection de la marque */}\r\n            <select\r\n              name=\"brand\"\r\n              value={formData.brand}\r\n              onChange={handleChange}\r\n              required\r\n            >\r\n              <option value=\"\">S√©lectionner une marque</option>\r\n              {brands.map((brand) => (\r\n                <option key={brand} value={brand}>\r\n                  {brand}\r\n                </option>\r\n              ))}\r\n            </select>\r\n            <input\r\n              type=\"file\"\r\n              name=\"image\"\r\n              accept=\"image/*\"\r\n              onChange={handleChange}\r\n            />\r\n            <button type=\"submit\">Mettre √† jour</button>\r\n          </form>\r\n          <button className=\"delete-btn\" onClick={deleteProduct}>\r\n            üóëÔ∏è Supprimer le produit\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditProductPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}