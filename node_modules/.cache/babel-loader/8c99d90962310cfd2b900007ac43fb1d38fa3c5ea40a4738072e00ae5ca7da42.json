{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\stage25\\\\frontend\\\\src\\\\context\\\\FavoritesContext.js\",\n  _s = $RefreshSig$();\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const FavoritesProvider = ({\n  children\n}) => {\n  _s();\n  const {\n    user\n  } = useContext(UserContext);\n  const [favorites, setFavorites] = useState([]);\n\n  // Charger les favoris depuis la base de données\n  useEffect(() => {\n    if (user) {\n      axios.get(`http://localhost:5001/api/favorites/${user.id}`).then(response => setFavorites(response.data)).catch(error => console.error(\"❌ Erreur chargement des favoris :\", error));\n    }\n  }, [user]);\n\n  // Ajouter ou supprimer des favoris\n  const toggleFavorite = async product => {\n    const isFavorite = favorites.some(fav => fav.id === product.id);\n    try {\n      if (isFavorite) {\n        await axios.delete(\"http://localhost:5001/api/favorites/remove\", {\n          data: {\n            user_id: user.id,\n            product_id: product.id\n          }\n        });\n        setFavorites(favorites.filter(fav => fav.id !== product.id));\n      } else {\n        await axios.post(\"http://localhost:5001/api/favorites/add\", {\n          user_id: user.id,\n          product_id: product.id\n        });\n        setFavorites([...favorites, product]);\n      }\n    } catch (error) {\n      console.error(\"❌ Erreur gestion des favoris :\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(FavoritesContext.Provider, {\n    value: {\n      favorites,\n      toggleFavorite\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 9\n  }, this);\n};\n_s(FavoritesProvider, \"xk7RD7/NtBLCvf9l7x+5Liyi9HE=\");\n_c = FavoritesProvider;\nvar _c;\n$RefreshReg$(_c, \"FavoritesProvider\");","map":{"version":3,"names":["FavoritesProvider","children","_s","user","useContext","UserContext","favorites","setFavorites","useState","useEffect","axios","get","id","then","response","data","catch","error","console","toggleFavorite","product","isFavorite","some","fav","delete","user_id","product_id","filter","post","_jsxDEV","FavoritesContext","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Admin/Desktop/stage25/frontend/src/context/FavoritesContext.js"],"sourcesContent":["export const FavoritesProvider = ({ children }) => {\r\n    const { user } = useContext(UserContext);\r\n    const [favorites, setFavorites] = useState([]);\r\n\r\n    // Charger les favoris depuis la base de données\r\n    useEffect(() => {\r\n        if (user) {\r\n            axios.get(`http://localhost:5001/api/favorites/${user.id}`)\r\n                .then((response) => setFavorites(response.data))\r\n                .catch((error) => console.error(\"❌ Erreur chargement des favoris :\", error));\r\n        }\r\n    }, [user]);\r\n\r\n    // Ajouter ou supprimer des favoris\r\n    const toggleFavorite = async (product) => {\r\n        const isFavorite = favorites.some((fav) => fav.id === product.id);\r\n\r\n        try {\r\n            if (isFavorite) {\r\n                await axios.delete(\"http://localhost:5001/api/favorites/remove\", {\r\n                    data: { user_id: user.id, product_id: product.id },\r\n                });\r\n                setFavorites(favorites.filter((fav) => fav.id !== product.id));\r\n            } else {\r\n                await axios.post(\"http://localhost:5001/api/favorites/add\", {\r\n                    user_id: user.id,\r\n                    product_id: product.id,\r\n                });\r\n                setFavorites([...favorites, product]);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"❌ Erreur gestion des favoris :\", error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <FavoritesContext.Provider value={{ favorites, toggleFavorite }}>\r\n            {children}\r\n        </FavoritesContext.Provider>\r\n    );\r\n};\r\n"],"mappings":";;;AAAA,OAAO,MAAMA,iBAAiB,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC/C,MAAM;IAAEC;EAAK,CAAC,GAAGC,UAAU,CAACC,WAAW,CAAC;EACxC,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGC,QAAQ,CAAC,EAAE,CAAC;;EAE9C;EACAC,SAAS,CAAC,MAAM;IACZ,IAAIN,IAAI,EAAE;MACNO,KAAK,CAACC,GAAG,CAAC,uCAAuCR,IAAI,CAACS,EAAE,EAAE,CAAC,CACtDC,IAAI,CAAEC,QAAQ,IAAKP,YAAY,CAACO,QAAQ,CAACC,IAAI,CAAC,CAAC,CAC/CC,KAAK,CAAEC,KAAK,IAAKC,OAAO,CAACD,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC,CAAC;IACpF;EACJ,CAAC,EAAE,CAACd,IAAI,CAAC,CAAC;;EAEV;EACA,MAAMgB,cAAc,GAAG,MAAOC,OAAO,IAAK;IACtC,MAAMC,UAAU,GAAGf,SAAS,CAACgB,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACX,EAAE,KAAKQ,OAAO,CAACR,EAAE,CAAC;IAEjE,IAAI;MACA,IAAIS,UAAU,EAAE;QACZ,MAAMX,KAAK,CAACc,MAAM,CAAC,4CAA4C,EAAE;UAC7DT,IAAI,EAAE;YAAEU,OAAO,EAAEtB,IAAI,CAACS,EAAE;YAAEc,UAAU,EAAEN,OAAO,CAACR;UAAG;QACrD,CAAC,CAAC;QACFL,YAAY,CAACD,SAAS,CAACqB,MAAM,CAAEJ,GAAG,IAAKA,GAAG,CAACX,EAAE,KAAKQ,OAAO,CAACR,EAAE,CAAC,CAAC;MAClE,CAAC,MAAM;QACH,MAAMF,KAAK,CAACkB,IAAI,CAAC,yCAAyC,EAAE;UACxDH,OAAO,EAAEtB,IAAI,CAACS,EAAE;UAChBc,UAAU,EAAEN,OAAO,CAACR;QACxB,CAAC,CAAC;QACFL,YAAY,CAAC,CAAC,GAAGD,SAAS,EAAEc,OAAO,CAAC,CAAC;MACzC;IACJ,CAAC,CAAC,OAAOH,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;IAC1D;EACJ,CAAC;EAED,oBACIY,OAAA,CAACC,gBAAgB,CAACC,QAAQ;IAACC,KAAK,EAAE;MAAE1B,SAAS;MAAEa;IAAe,CAAE;IAAAlB,QAAA,EAC3DA;EAAQ;IAAAgC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACc,CAAC;AAEpC,CAAC;AAAClC,EAAA,CAxCWF,iBAAiB;AAAAqC,EAAA,GAAjBrC,iBAAiB;AAAA,IAAAqC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}