{"ast":null,"code":"import React,{useContext,useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import{CartContext}from\"../context/CartContext\";import{UserContext}from\"../context/UserContext\";import{FaTrash}from\"react-icons/fa\";import\"../styles/CartPage.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CartPage=()=>{const{cart,addToCart,removeFromCart,clearCart,decreaseQuantity,increaseQuantity}=useContext(CartContext);const{user}=useContext(UserContext);const navigate=useNavigate();const[address,setAddress]=useState(null);useEffect(()=>{console.log(\"üì¶ Produits dans le panier :\",cart);},[cart]);// Charger l'adresse depuis la base de donn√©es\n/* useEffect(() => {\r\n       if (user) {\r\n          axios.get(`http://localhost:5001/api/addresses/${user.id}`)\r\n               .then((response) => setAddress(response.data))\r\n               .catch((error) => console.error(\"‚ùå Erreur chargement de l'adresse :\", error));\r\n        }\r\n    }, [user]);*/const totalPrice=cart.reduce((acc,product)=>{return acc+(product.prix?product.prix*product.quantity:0);},0);return/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDED2 Mon Panier\"}),address?/*#__PURE__*/_jsxs(\"div\",{className:\"address-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Adresse de livraison\"}),/*#__PURE__*/_jsxs(\"p\",{children:[address.first_name,\" \",address.last_name]}),/*#__PURE__*/_jsx(\"p\",{children:address.phone}),/*#__PURE__*/_jsx(\"p\",{children:address.address}),address.extra_info&&/*#__PURE__*/_jsx(\"p\",{children:address.extra_info}),/*#__PURE__*/_jsx(\"p\",{children:address.postal_code}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/order\"),className:\"edit-address-btn\",children:\"Modifier l'adresse\"})]}):/*#__PURE__*/_jsx(\"p\",{}),cart.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"Votre panier est vide.\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"ul\",{children:cart.map(product=>/*#__PURE__*/_jsxs(\"li\",{className:\"cart-item\",children:[product.image_url&&/*#__PURE__*/_jsx(\"img\",{src:`http://localhost:5001${product.image_url}`,alt:product.nom}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:product.nom}),/*#__PURE__*/_jsx(\"p\",{children:Number.isFinite(parseFloat(product.prix))?`${parseFloat(product.prix).toFixed(2)} CAD`:\"Prix non disponible\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"quantity-controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>decreaseQuantity(product.product_id),children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{children:product.quantity}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>increaseQuantity(product.product_id),children:\"+\"})]}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"Total :\",Number.isFinite(parseFloat(product.prix))?(parseFloat(product.prix)*product.quantity).toFixed(2):\"0.00\",\" CAD\"]})}),/*#__PURE__*/_jsxs(\"button\",{className:\"remove-btn\",onClick:()=>removeFromCart(product.product_id),children:[/*#__PURE__*/_jsx(FaTrash,{}),\" Retirer\"]})]})]},product.product_id))}),/*#__PURE__*/_jsxs(\"h3\",{className:\"total-price\",children:[\"Total: \",cart.reduce((acc,product)=>{const prix=Number.isFinite(parseFloat(product.prix))?parseFloat(product.prix):0;return acc+prix*product.quantity;},0).toFixed(2),\" CAD\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"clear-cart\",onClick:()=>{clearCart();alert(\"‚úÖ Panier vid√© !\");},children:\"\\uD83D\\uDDD1\\uFE0F Vider le panier\"}),user?/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/order\"),className:\"checkout-btn\",children:\"\\u2705 Passer la commande\"}):/*#__PURE__*/_jsx(\"p\",{children:\"\\uD83D\\uDD12 Veuillez vous connecter pour passer la commande.\"})]})]});};export default CartPage;","map":{"version":3,"names":["React","useContext","useEffect","useState","useNavigate","axios","CartContext","UserContext","FaTrash","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CartPage","cart","addToCart","removeFromCart","clearCart","decreaseQuantity","increaseQuantity","user","navigate","address","setAddress","console","log","totalPrice","reduce","acc","product","prix","quantity","className","children","first_name","last_name","phone","extra_info","postal_code","onClick","length","map","image_url","src","alt","nom","Number","isFinite","parseFloat","toFixed","product_id","alert"],"sources":["C:/Users/Admin/Desktop/stage25/frontend/src/pages/CartPage.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { CartContext } from \"../context/CartContext\";\r\nimport { UserContext } from \"../context/UserContext\";\r\nimport { FaTrash } from \"react-icons/fa\";\r\nimport \"../styles/CartPage.css\";\r\n\r\nconst CartPage = () => {\r\n    const { cart, addToCart, removeFromCart, clearCart, decreaseQuantity, increaseQuantity } = useContext(CartContext);\r\n    const { user } = useContext(UserContext);\r\n    const navigate = useNavigate();\r\n    const [address, setAddress] = useState(null);\r\n\r\n    useEffect(() => {\r\n        console.log(\"üì¶ Produits dans le panier :\", cart);\r\n    }, [cart]);\r\n\r\n    // Charger l'adresse depuis la base de donn√©es\r\n    /* useEffect(() => {\r\n       if (user) {\r\n          axios.get(`http://localhost:5001/api/addresses/${user.id}`)\r\n               .then((response) => setAddress(response.data))\r\n               .catch((error) => console.error(\"‚ùå Erreur chargement de l'adresse :\", error));\r\n        }\r\n    }, [user]);*/\r\n\r\n    const totalPrice = cart.reduce((acc, product) => {\r\n        return acc + (product.prix ? product.prix * product.quantity : 0);\r\n    }, 0);\r\n\r\n    return (\r\n        <div className=\"cart-container\">\r\n            <h2>üõí Mon Panier</h2>\r\n\r\n            {address ? (\r\n                <div className=\"address-info\">\r\n                    <h3>Adresse de livraison</h3>\r\n                    <p>{address.first_name} {address.last_name}</p>\r\n                    <p>{address.phone}</p>\r\n                    <p>{address.address}</p>\r\n                    {address.extra_info && <p>{address.extra_info}</p>}\r\n                    <p>{address.postal_code}</p>\r\n                    <button onClick={() => navigate(\"/order\")} className=\"edit-address-btn\">\r\n                        Modifier l'adresse\r\n                    </button>\r\n                </div>\r\n            ) : (\r\n                <p></p>\r\n            )}\r\n\r\n{cart.length === 0 ? (\r\n    <p>Votre panier est vide.</p>\r\n) : (\r\n    <>\r\n        <ul>\r\n            {cart.map((product) => (\r\n                <li key={product.product_id} className=\"cart-item\">\r\n                    {product.image_url && (\r\n                        <img src={`http://localhost:5001${product.image_url}`} alt={product.nom} />\r\n                    )}\r\n                    <div>\r\n                        <h3>{product.nom}</h3>\r\n                        <p>\r\n                            {Number.isFinite(parseFloat(product.prix)) \r\n                                ? `${parseFloat(product.prix).toFixed(2)} CAD`\r\n                                : \"Prix non disponible\"}\r\n                        </p>\r\n\r\n                        <div className=\"quantity-controls\">\r\n                    <button onClick={() => decreaseQuantity(product.product_id)}>-</button>\r\n                    <span>{product.quantity}</span>\r\n                    <button onClick={() => increaseQuantity(product.product_id)}>+</button>\r\n                </div>\r\n\r\n                        <p>\r\n                            <strong>Total : \r\n                                {Number.isFinite(parseFloat(product.prix)) \r\n                                    ? (parseFloat(product.prix) * product.quantity).toFixed(2) \r\n                                    : \"0.00\"} CAD\r\n                            </strong>\r\n                        </p>\r\n                        <button className=\"remove-btn\" onClick={() => removeFromCart(product.product_id)}>\r\n                            <FaTrash /> Retirer\r\n                        </button>\r\n                    </div>\r\n                </li>\r\n            ))}\r\n        </ul>\r\n        <h3 className=\"total-price\">\r\n            Total: {cart.reduce((acc, product) => {\r\n                const prix = Number.isFinite(parseFloat(product.prix)) ? parseFloat(product.prix) : 0;\r\n                return acc + prix * product.quantity;\r\n            }, 0).toFixed(2)} CAD\r\n        </h3>\r\n                            <button\r\n                    className=\"clear-cart\"\r\n                    onClick={() => {\r\n                        clearCart();\r\n                        alert(\"‚úÖ Panier vid√© !\");\r\n                    }}\r\n                    >\r\n                    üóëÔ∏è Vider le panier\r\n                    </button>\r\n\r\n                    {user ? (\r\n                        <button onClick={() => navigate(\"/order\")} className=\"checkout-btn\">\r\n                            ‚úÖ Passer la commande\r\n                        </button>\r\n                    ) : (\r\n                        <p>üîí Veuillez vous connecter pour passer la commande.</p>\r\n                    )}\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CartPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}