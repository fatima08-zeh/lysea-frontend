{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\stage25\\\\frontend\\\\src\\\\context\\\\FavoritesContext.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useContext, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { UserContext } from \"./UserContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const FavoritesContext = /*#__PURE__*/createContext();\nexport const FavoritesProvider = ({\n  children\n}) => {\n  _s();\n  const {\n    user\n  } = useContext(UserContext) || {}; // ✅ Correction ici\n  const [favorites, setFavorites] = useState([]);\n  useEffect(() => {\n    if (user && user.id) {\n      axios.get(`http://localhost:5001/api/favorites/${user.id}`).then(response => {\n        setFavorites(response.data);\n      }).catch(error => console.error(\"❌ Erreur chargement des favoris :\", error));\n    }\n  }, [user]);\n  const toggleFavorite = product => {\n    const isFavorite = favorites.some(fav => fav.id === product.id);\n    let updatedFavorites;\n    if (isFavorite) {\n      updatedFavorites = favorites.filter(fav => fav.id !== product.id);\n    } else {\n      updatedFavorites = [...favorites, product];\n    }\n    setFavorites(updatedFavorites);\n    localStorage.setItem(\"favorites\", JSON.stringify(updatedFavorites));\n  };\n  return /*#__PURE__*/_jsxDEV(FavoritesContext.Provider, {\n    value: {\n      favorites,\n      toggleFavorite\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 9\n  }, this);\n};\n_s(FavoritesProvider, \"HrhZgCAKEny0qmWL7kt/1/f2jas=\");\n_c = FavoritesProvider;\nvar _c;\n$RefreshReg$(_c, \"FavoritesProvider\");","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","axios","UserContext","jsxDEV","_jsxDEV","FavoritesContext","FavoritesProvider","children","_s","user","favorites","setFavorites","id","get","then","response","data","catch","error","console","toggleFavorite","product","isFavorite","some","fav","updatedFavorites","filter","localStorage","setItem","JSON","stringify","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Admin/Desktop/stage25/frontend/src/context/FavoritesContext.js"],"sourcesContent":["import React, { createContext, useState, useContext, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { UserContext } from \"./UserContext\";\r\n\r\nexport const FavoritesContext = createContext();\r\n\r\nexport const FavoritesProvider = ({ children }) => {\r\n    const { user } = useContext(UserContext) || {};  // ✅ Correction ici\r\n    const [favorites, setFavorites] = useState([]);\r\n\r\n    useEffect(() => {\r\n        if (user && user.id) {\r\n            axios\r\n                .get(`http://localhost:5001/api/favorites/${user.id}`)\r\n                .then((response) => {\r\n                    setFavorites(response.data);\r\n                })\r\n                .catch((error) => console.error(\"❌ Erreur chargement des favoris :\", error));\r\n        }\r\n    }, [user]);\r\n\r\n    const toggleFavorite = (product) => {\r\n        const isFavorite = favorites.some((fav) => fav.id === product.id);\r\n        let updatedFavorites;\r\n\r\n        if (isFavorite) {\r\n            updatedFavorites = favorites.filter((fav) => fav.id !== product.id);\r\n        } else {\r\n            updatedFavorites = [...favorites, product];\r\n        }\r\n\r\n        setFavorites(updatedFavorites);\r\n        localStorage.setItem(\"favorites\", JSON.stringify(updatedFavorites));\r\n    };\r\n\r\n    return (\r\n        <FavoritesContext.Provider value={{ favorites, toggleFavorite }}>\r\n            {children}\r\n        </FavoritesContext.Provider>\r\n    );\r\n};\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,UAAU,EAAEC,SAAS,QAAQ,OAAO;AAC7E,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5C,OAAO,MAAMC,gBAAgB,gBAAGR,aAAa,CAAC,CAAC;AAE/C,OAAO,MAAMS,iBAAiB,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC/C,MAAM;IAAEC;EAAK,CAAC,GAAGV,UAAU,CAACG,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAE;EACjD,MAAM,CAACQ,SAAS,EAAEC,YAAY,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EAE9CE,SAAS,CAAC,MAAM;IACZ,IAAIS,IAAI,IAAIA,IAAI,CAACG,EAAE,EAAE;MACjBX,KAAK,CACAY,GAAG,CAAC,uCAAuCJ,IAAI,CAACG,EAAE,EAAE,CAAC,CACrDE,IAAI,CAAEC,QAAQ,IAAK;QAChBJ,YAAY,CAACI,QAAQ,CAACC,IAAI,CAAC;MAC/B,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,IAAKC,OAAO,CAACD,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC,CAAC;IACpF;EACJ,CAAC,EAAE,CAACT,IAAI,CAAC,CAAC;EAEV,MAAMW,cAAc,GAAIC,OAAO,IAAK;IAChC,MAAMC,UAAU,GAAGZ,SAAS,CAACa,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACZ,EAAE,KAAKS,OAAO,CAACT,EAAE,CAAC;IACjE,IAAIa,gBAAgB;IAEpB,IAAIH,UAAU,EAAE;MACZG,gBAAgB,GAAGf,SAAS,CAACgB,MAAM,CAAEF,GAAG,IAAKA,GAAG,CAACZ,EAAE,KAAKS,OAAO,CAACT,EAAE,CAAC;IACvE,CAAC,MAAM;MACHa,gBAAgB,GAAG,CAAC,GAAGf,SAAS,EAAEW,OAAO,CAAC;IAC9C;IAEAV,YAAY,CAACc,gBAAgB,CAAC;IAC9BE,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEC,IAAI,CAACC,SAAS,CAACL,gBAAgB,CAAC,CAAC;EACvE,CAAC;EAED,oBACIrB,OAAA,CAACC,gBAAgB,CAAC0B,QAAQ;IAACC,KAAK,EAAE;MAAEtB,SAAS;MAAEU;IAAe,CAAE;IAAAb,QAAA,EAC3DA;EAAQ;IAAA0B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACc,CAAC;AAEpC,CAAC;AAAC5B,EAAA,CAlCWF,iBAAiB;AAAA+B,EAAA,GAAjB/B,iBAAiB;AAAA,IAAA+B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}