{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\stage25\\\\frontend\\\\src\\\\context\\\\FavoritesContext.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useContext, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { UserContext } from \"./UserContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const FavoritesContext = /*#__PURE__*/createContext(); // ✅ Export correct du contexte\n\nexport const FavoritesProvider = ({\n  children\n}) => {\n  _s();\n  const {\n    user\n  } = useContext(UserContext) || {};\n  const [favorites, setFavorites] = useState([]);\n\n  // Charger les favoris depuis la base de données\n  useEffect(() => {\n    if (user && user.id) {\n      axios.get(`http://localhost:5001/api/favorites/${user.id}`).then(response => {\n        setFavorites(response.data);\n      }).catch(error => console.error(\"❌ Erreur chargement des favoris :\", error));\n    }\n  }, [user]);\n  const toggleFavorite = async product => {\n    const isFavorite = favorites.some(fav => fav.id === product.id);\n    try {\n      if (isFavorite) {\n        await axios.delete(\"http://localhost:5001/api/favorites/remove\", {\n          data: {\n            user_id: user.id,\n            product_id: product.id\n          }\n        });\n        setFavorites(favorites.filter(fav => fav.id !== product.id));\n      } else {\n        await axios.post(\"http://localhost:5001/api/favorites/add\", {\n          user_id: user.id,\n          product_id: product.id\n        });\n        setFavorites([...favorites, product]);\n      }\n    } catch (error) {\n      console.error(\"❌ Erreur gestion des favoris :\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(FavoritesContext.Provider, {\n    value: {\n      favorites,\n      toggleFavorite,\n      setFavorites\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 9\n  }, this);\n};\n_s(FavoritesProvider, \"HrhZgCAKEny0qmWL7kt/1/f2jas=\");\n_c = FavoritesProvider;\nvar _c;\n$RefreshReg$(_c, \"FavoritesProvider\");","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","axios","UserContext","jsxDEV","_jsxDEV","FavoritesContext","FavoritesProvider","children","_s","user","favorites","setFavorites","id","get","then","response","data","catch","error","console","toggleFavorite","product","isFavorite","some","fav","delete","user_id","product_id","filter","post","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Admin/Desktop/stage25/frontend/src/context/FavoritesContext.js"],"sourcesContent":["import React, { createContext, useState, useContext, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { UserContext } from \"./UserContext\";\r\n\r\nexport const FavoritesContext = createContext(); // ✅ Export correct du contexte\r\n\r\nexport const FavoritesProvider = ({ children }) => {\r\n    const { user } = useContext(UserContext) || {};\r\n    const [favorites, setFavorites] = useState([]);\r\n\r\n    // Charger les favoris depuis la base de données\r\n    useEffect(() => {\r\n        if (user && user.id) {\r\n            axios\r\n                .get(`http://localhost:5001/api/favorites/${user.id}`)\r\n                .then((response) => {\r\n                    setFavorites(response.data);\r\n                })\r\n                .catch((error) => console.error(\"❌ Erreur chargement des favoris :\", error));\r\n        }\r\n    }, [user]);\r\n    const toggleFavorite = async (product) => {\r\n        const isFavorite = favorites.some((fav) => fav.id === product.id);\r\n    \r\n        try {\r\n            if (isFavorite) {\r\n                await axios.delete(\"http://localhost:5001/api/favorites/remove\", {\r\n                    data: { user_id: user.id, product_id: product.id },\r\n                });\r\n                setFavorites(favorites.filter((fav) => fav.id !== product.id));\r\n            } else {\r\n                await axios.post(\"http://localhost:5001/api/favorites/add\", {\r\n                    user_id: user.id,\r\n                    product_id: product.id,\r\n                });\r\n                setFavorites([...favorites, product]);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"❌ Erreur gestion des favoris :\", error);\r\n        }\r\n    };\r\n    \r\n    return (\r\n        <FavoritesContext.Provider value={{ favorites, toggleFavorite, setFavorites }}>\r\n            {children}\r\n        </FavoritesContext.Provider>\r\n    );\r\n};\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,UAAU,EAAEC,SAAS,QAAQ,OAAO;AAC7E,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5C,OAAO,MAAMC,gBAAgB,gBAAGR,aAAa,CAAC,CAAC,CAAC,CAAC;;AAEjD,OAAO,MAAMS,iBAAiB,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC/C,MAAM;IAAEC;EAAK,CAAC,GAAGV,UAAU,CAACG,WAAW,CAAC,IAAI,CAAC,CAAC;EAC9C,MAAM,CAACQ,SAAS,EAAEC,YAAY,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;;EAE9C;EACAE,SAAS,CAAC,MAAM;IACZ,IAAIS,IAAI,IAAIA,IAAI,CAACG,EAAE,EAAE;MACjBX,KAAK,CACAY,GAAG,CAAC,uCAAuCJ,IAAI,CAACG,EAAE,EAAE,CAAC,CACrDE,IAAI,CAAEC,QAAQ,IAAK;QAChBJ,YAAY,CAACI,QAAQ,CAACC,IAAI,CAAC;MAC/B,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,IAAKC,OAAO,CAACD,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC,CAAC;IACpF;EACJ,CAAC,EAAE,CAACT,IAAI,CAAC,CAAC;EACV,MAAMW,cAAc,GAAG,MAAOC,OAAO,IAAK;IACtC,MAAMC,UAAU,GAAGZ,SAAS,CAACa,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACZ,EAAE,KAAKS,OAAO,CAACT,EAAE,CAAC;IAEjE,IAAI;MACA,IAAIU,UAAU,EAAE;QACZ,MAAMrB,KAAK,CAACwB,MAAM,CAAC,4CAA4C,EAAE;UAC7DT,IAAI,EAAE;YAAEU,OAAO,EAAEjB,IAAI,CAACG,EAAE;YAAEe,UAAU,EAAEN,OAAO,CAACT;UAAG;QACrD,CAAC,CAAC;QACFD,YAAY,CAACD,SAAS,CAACkB,MAAM,CAAEJ,GAAG,IAAKA,GAAG,CAACZ,EAAE,KAAKS,OAAO,CAACT,EAAE,CAAC,CAAC;MAClE,CAAC,MAAM;QACH,MAAMX,KAAK,CAAC4B,IAAI,CAAC,yCAAyC,EAAE;UACxDH,OAAO,EAAEjB,IAAI,CAACG,EAAE;UAChBe,UAAU,EAAEN,OAAO,CAACT;QACxB,CAAC,CAAC;QACFD,YAAY,CAAC,CAAC,GAAGD,SAAS,EAAEW,OAAO,CAAC,CAAC;MACzC;IACJ,CAAC,CAAC,OAAOH,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;IAC1D;EACJ,CAAC;EAED,oBACId,OAAA,CAACC,gBAAgB,CAACyB,QAAQ;IAACC,KAAK,EAAE;MAAErB,SAAS;MAAEU,cAAc;MAAET;IAAa,CAAE;IAAAJ,QAAA,EACzEA;EAAQ;IAAAyB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACc,CAAC;AAEpC,CAAC;AAAC3B,EAAA,CAzCWF,iBAAiB;AAAA8B,EAAA,GAAjB9B,iBAAiB;AAAA,IAAA8B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}